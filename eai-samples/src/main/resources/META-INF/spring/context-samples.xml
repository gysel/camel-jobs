<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:camel="http://camel.apache.org/schema/spring" xmlns:broker="http://activemq.apache.org/schema/core"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd 
    http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">
	
	<context:component-scan base-package="ch.hsr.sa.eai.samples" />
	
	<camelContext id="camel" xmlns="http://camel.apache.org/schema/spring">
		<routeBuilder ref="apiRouteBuilder" />
		
		<restConfiguration component="jetty" host="0.0.0.0" port="8080" bindingMode="json_xml">
		</restConfiguration>

		<route id="test">
			<from uri="vm:trigger-test" />
			<log message="test job running" />
			<to uri="metrics:counter:test.successful" />
			<to uri="metrics:counter:test.successful" />
			<to uri="metrics:counter:test.failed" />
			<to uri="metrics:counter:test.ignored" />
		</route>
		
		<route id="timer-test">
			<from uri="timer:test-trigger?period=10000" />
			<to uri="vm:trigger-test" />
		</route>

	</camelContext>

</beans>
